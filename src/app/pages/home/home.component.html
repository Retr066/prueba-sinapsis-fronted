<div class="container">
    <div class="row mt-4">
        <div class="col-md-12">
            <h1 class="text-black">Lista de las CampaÃ±as</h1>
        </div>
    </div>
    <form class="row mt-4 row-cols-sm-auto">
        <div class="col-12">
            <div class="dp-hidden position-absolute">
                <div class="input-group">
                    <input
                        name="datepicker"
                        class="form-control"
                        ngbDatepicker
                        #datepicker="ngbDatepicker"
                        [autoClose]="'outside'"
                        (dateSelect)="onDateSelection($event)"
                        [displayMonths]="2"
                        [dayTemplate]="t"
                        outsideDays="hidden"
                        [startDate]="fromDate!"
                        tabindex="-1"
                        
                    />
                    <ng-template #t let-date let-focused="focused">
                        <span
                            class="custom-day"
                            [class.focused]="focused"
                            [class.range]="isRange(date)"
                            [class.faded]="isHovered(date) || isInside(date)"
                            (mouseenter)="hoveredDate = date"
                            (mouseleave)="hoveredDate = null"
                        >
                            {{ date.day }}
                        </span>
                    </ng-template>
                </div>
            </div>
            <div class="input-group">
                <input
                    #dpFromDate
                    class="form-control"
                    placeholder="yyyy-mm-dd"
                    name="dpFromDate"
                    [value]="formatter.format(fromDate)"
                    (input)="fromDate = validateInput(fromDate, dpFromDate.value) || fromDate"
                />
                <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button">
                    
                </button>
            </div>
        </div>
        <div class="col-12">
            <div class="input-group">
                <input
                    #dpToDate
                    class="form-control"
                    placeholder="yyyy-mm-dd"
                    name="dpToDate"
                    [value]="formatter.format(toDate)"
                    (input)="toDate = validateInput(toDate, dpToDate.value)"
                />
                <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button"></button>
            </div>
        </div>
    </form>

    <div class="row mt-4">
        <div class="col-md-12">
            <div class="table-responsive">
                <table class="table table-striped table-sm">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Country</th>
                            <th scope="col">Area</th>
                            <th scope="col">Population</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (country of countries; track country.name) {
                        <tr>
                            <th scope="row">{{ country.id }}</th>
                            <td>
                                <img [src]="'https://upload.wikimedia.org/wikipedia/commons/' + country.flag"
                                    [alt]="'The flag of ' + country.name" class="me-2" style="width: 20px" />
                                {{ country.name }}
                            </td>
                            <td>{{ country.area | number:'1.0-0' }}</td>
                            <td>{{ country.population | number }}</td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="d-flex justify-content-between p-2">
                <ngb-pagination [collectionSize]="pagination.collectionSize" [(page)]="pagination.page"
                    [pageSize]="pagination.pageSize" (pageChange)="refreshCountries()">
                </ngb-pagination>

                <select class="form-select" style="width: auto" [(ngModel)]="pagination.collectionSize"
                    (ngModelChange)="refreshCountries()">
                    <option [ngValue]="2">2 items per page</option>
                    <option [ngValue]="4">4 items per page</option>
                    <option [ngValue]="6">6 items per page</option>
                </select>
            </div>
        </div>
    </div>

</div>
